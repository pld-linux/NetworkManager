diff -urN NetworkManager-0.6.4/gnome/libnm_glib/libnm_glib.c NetworkManager-0.6.4.new/gnome/libnm_glib/libnm_glib.c
--- NetworkManager-0.6.4/gnome/libnm_glib/libnm_glib.c	2006-05-05 17:36:46.000000000 +0200
+++ NetworkManager-0.6.4.new/gnome/libnm_glib/libnm_glib.c	2007-01-13 11:41:16.978873626 +0100
@@ -230,7 +230,7 @@
 	{
 		/* Try to reactivate our connection to dbus on the next pass through the event loop */
 		ctx->nm_state = LIBNM_NO_DBUS;
-		dbus_connection_disconnect (ctx->dbus_con);
+		dbus_connection_close (ctx->dbus_con);
 		libnm_glib_schedule_dbus_watcher (ctx);
 	}
 	else if (dbus_message_is_signal (message, DBUS_INTERFACE_DBUS, "NameOwnerChanged"))
@@ -444,7 +444,7 @@
 		g_main_loop_unref (ctx->g_main_loop);
 
 	if (ctx->dbus_con)
-		dbus_connection_disconnect (ctx->dbus_con);
+		dbus_connection_close (ctx->dbus_con);
 
 	if (ctx->callbacks_lock)
 		g_mutex_free (ctx->callbacks_lock);
diff -urN NetworkManager-0.6.4/src/NetworkManagerDbus.c NetworkManager-0.6.4.new/src/NetworkManagerDbus.c
--- NetworkManager-0.6.4/src/NetworkManagerDbus.c	2006-05-21 19:28:02.000000000 +0200
+++ NetworkManager-0.6.4.new/src/NetworkManagerDbus.c	2007-01-13 11:41:34.618873626 +0100
@@ -831,7 +831,7 @@
 	}
 
 	dbus_error_init (&error);
-#if (DBUS_VERSION_MAJOR == 0) && (DBUS_VERSION_MINOR >= 60)
+#if ((DBUS_VERSION_MAJOR == 0) && (DBUS_VERSION_MINOR >= 60) || DBUS_VERSION_MAJOR > 0)
 	flags = DBUS_NAME_FLAG_DO_NOT_QUEUE;	/* Prohibit replacement is now the default */
 #else
 	flags = DBUS_NAME_FLAG_PROHIBIT_REPLACEMENT;
